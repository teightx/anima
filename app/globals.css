@import 'tailwindcss';
@import '../styles/tokens.css';
@import '../styles/typography.css';
@import '../styles/layout.css';
@import '../styles/brand-mock.css';

/* ============================================================================
   Global Layout Fixes
   ============================================================================ */

html,
body {
  overflow-x: hidden;
  width: 100%;
  position: relative;
}

/*
 * Ânima Design System v2
 * =====================
 * 
 * Identidade visual: institucional, longeva, produto próprio
 * 
 * Paleta:
 * - Light: "Porcelana fria" (off-white material)
 * - Dark: "Ink azul" (azul profundo, não preto)
 * - Primary: azul mineral discreto
 * 
 * Tipografia:
 * - Sans (Inter): UI, navegação, botões, labels
 * - Serif (Source Serif 4): Observações, referências
 * 
 * Contraste: AA mínimo garantido
 * Bordas: hairline (quase invisíveis)
 * Sombras: máximo 1 sombra suave
 */

/* ============================================================================
   Tailwind Theme Integration
   ============================================================================ */

@theme inline {
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  
  /* Semantic colors */
  --color-surface: hsl(var(--surface));
  --color-surface-2: hsl(var(--surface-2));
  --color-text-primary: hsl(var(--text-primary));
  --color-text-secondary: hsl(var(--text-secondary));
  --color-text-muted: hsl(var(--text-muted));
  --color-hairline: hsl(var(--hairline));
  --color-primary-muted: hsl(var(--primary-muted));
  --color-primary-muted-foreground: hsl(var(--primary-muted-foreground));
  --color-danger-muted: hsl(var(--danger-muted));
  --color-danger-muted-foreground: hsl(var(--danger-muted-foreground));
  --color-success-muted: hsl(var(--success-muted));
  --color-success-muted-foreground: hsl(var(--success-muted-foreground));
  --color-warning-muted: hsl(var(--warning-muted));
  --color-warning-muted-foreground: hsl(var(--warning-muted-foreground));
  
  /* Radius */
  --radius-sm: var(--radius-sm);
  --radius-md: var(--radius-md);
  --radius-lg: var(--radius-lg);
  --radius-xl: var(--radius-xl);
  
  /* Typography */
  --font-sans: var(--font-sans);
  --font-serif: var(--font-serif);
}

/* ============================================================================
   Base Styles
   ============================================================================ */

* {
  border-color: hsl(var(--hairline));
}

body {
  background-color: hsl(var(--background));
  color: hsl(var(--text-primary));
  font-family: var(--font-sans);
  font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  line-height: 1.6;
}

/* ============================================================================
   Atmosfera - Background com textura sutil
   ============================================================================ */

/* Light mode - gradiente radial suave */
:root body {
  background-image:
    /* Grain discreto (2.5%) */
    url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.025'/%3E%3C/svg%3E"),
    /* Gradiente radial superior - azul mineral sutil */
    radial-gradient(
      ellipse 900px 500px at 5% -10%,
      hsl(210 32% 42% / 0.04),
      transparent 55%
    ),
    /* Gradiente de profundidade */
    linear-gradient(
      178deg,
      hsl(45 20% 95% / 0.5) 0%,
      transparent 25%
    );
  background-attachment: fixed;
}

/* Dark mode - profundidade azul */
.dark body {
  background-image:
    /* Grain sutil (3.5%) */
    url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.035'/%3E%3C/svg%3E"),
    /* Gradiente radial superior */
    radial-gradient(
      ellipse 800px 450px at 8% -12%,
      hsl(210 35% 55% / 0.06),
      transparent 50%
    ),
    /* Gradiente inferior profundo */
    radial-gradient(
      ellipse 700px 400px at 95% 105%,
      hsl(222 30% 12% / 0.5),
      transparent 55%
    );
  background-attachment: fixed;
}

/* ============================================================================
   Card - Material consistente
   ============================================================================ */

[data-slot='card'],
.card-base {
  background-color: hsl(var(--surface));
  box-shadow: var(--shadow-subtle);
  border: 1px solid hsl(var(--hairline));
  transition: 
    box-shadow var(--transition-base),
    border-color var(--transition-base);
}

[data-slot='card']:hover,
.card-base:hover {
  box-shadow: var(--shadow-soft);
  border-color: hsl(var(--border));
}

/* Card sem hover (para cards estáticos) */
.card-static,
[data-slot='card'][data-variant='static'] {
  box-shadow: var(--shadow-subtle);
  border-color: hsl(var(--hairline));
}

.card-static:hover,
[data-slot='card'][data-variant='static']:hover {
  box-shadow: var(--shadow-subtle);
  border-color: hsl(var(--hairline));
}

/* ============================================================================
   Badges - Discretos e consistentes
   ============================================================================ */

[data-slot='badge'] {
  font-weight: 500;
  font-size: 0.6875rem;
  letter-spacing: 0.02em;
  text-transform: uppercase;
}

/* Badge default usa primary-muted */
[data-slot='badge'][data-variant='default'] {
  background-color: hsl(var(--primary-muted));
  color: hsl(var(--primary-muted-foreground));
}

/* Badge secondary usa surface-2 */
[data-slot='badge'][data-variant='secondary'] {
  background-color: hsl(var(--surface-2));
  color: hsl(var(--text-secondary));
}

/* ============================================================================
   Buttons - Refinados
   ============================================================================ */

button,
[role='button'] {
  font-weight: 500;
  letter-spacing: 0.005em;
}

/* Primary button */
[data-slot='button'][data-variant='default'],
.btn-primary {
  background-color: hsl(var(--primary));
  color: hsl(var(--primary-foreground));
  transition: background-color var(--transition-fast);
}

[data-slot='button'][data-variant='default']:hover,
.btn-primary:hover {
  background-color: hsl(var(--primary-hover));
}

/* Ghost/outline buttons */
[data-slot='button'][data-variant='ghost'],
[data-slot='button'][data-variant='outline'] {
  color: hsl(var(--text-secondary));
}

[data-slot='button'][data-variant='ghost']:hover,
[data-slot='button'][data-variant='outline']:hover {
  background-color: hsl(var(--surface-2));
  color: hsl(var(--text-primary));
}

/* ============================================================================
   Tabs e Toggles - Suaves e menos contrastantes
   ============================================================================ */

[role='tablist'] {
  background-color: hsl(var(--surface-2) / 0.6);
  border-radius: var(--radius-md);
  padding: 0.25rem;
}

[role='tab'] {
  font-weight: 500;
  font-size: 0.875rem;
  transition: all var(--transition-fast);
  color: hsl(var(--text-muted));
}

[role='tab']:hover:not([data-state='active']) {
  color: hsl(var(--text-secondary));
}

[role='tab'][data-state='active'] {
  background-color: hsl(var(--surface));
  color: hsl(var(--text-primary));
  box-shadow: var(--shadow-subtle);
}

/* Toggle Group discreto */
.toggle-group-subtle [data-state='on'] {
  background-color: hsl(var(--surface));
  color: hsl(var(--text-primary));
}

/* Tab pills customizadas */
.tab-pill {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.375rem 0.75rem;
  font-size: 0.8125rem;
  font-weight: 500;
  border-radius: var(--radius-sm);
  transition: all var(--transition-fast);
  color: hsl(var(--text-muted));
  background-color: hsl(var(--surface-2) / 0.5);
}

.tab-pill:hover:not(.tab-pill-active) {
  background-color: hsl(var(--surface-2));
  color: hsl(var(--text-secondary));
}

.tab-pill-active {
  background-color: hsl(var(--surface));
  color: hsl(var(--text-primary));
  box-shadow: var(--shadow-subtle);
}

/* ============================================================================
   Focus States - Suaves
   ============================================================================ */

:focus-visible {
  outline: 2px solid hsl(var(--ring) / 0.35);
  outline-offset: 2px;
}

/* ============================================================================
   Scrollbar - Minimalista
   ============================================================================ */

::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--text-muted) / 0.18);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--text-muted) / 0.28);
}

/* ============================================================================
   Selection
   ============================================================================ */

::selection {
  background: hsl(var(--primary) / 0.12);
  color: hsl(var(--text-primary));
}

.dark ::selection {
  background: hsl(var(--primary) / 0.18);
}

/* ============================================================================
   Charts - Linhas mais finas, pontos menores
   ============================================================================ */

.recharts-line {
  stroke-width: 1.5 !important;
}

.recharts-dot {
  r: 2.5 !important;
}

.recharts-active-dot {
  r: 4 !important;
}

.recharts-cartesian-axis-tick-value {
  font-size: 0.75rem !important;
  fill: hsl(var(--text-muted)) !important;
}

.recharts-legend-item-text {
  font-size: 0.8125rem !important;
  color: hsl(var(--text-muted)) !important;
}

/* ============================================================================
   Sliders - Discretos
   ============================================================================ */

input[type='range'] {
  -webkit-appearance: none;
  appearance: none;
  background: transparent;
  cursor: pointer;
  height: 1.5rem;
}

input[type='range']::-webkit-slider-runnable-track {
  background: hsl(var(--surface-2));
  height: 0.375rem;
  border-radius: 9999px;
}

input[type='range']::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 1rem;
  height: 1rem;
  border-radius: 50%;
  background: hsl(var(--surface));
  border: 1.5px solid hsl(var(--border));
  margin-top: -0.3125rem;
  box-shadow: var(--shadow-subtle);
  transition: border-color var(--transition-fast);
}

input[type='range']:hover::-webkit-slider-thumb {
  border-color: hsl(var(--primary) / 0.5);
}

input[type='range']:focus-visible::-webkit-slider-thumb {
  outline: 2px solid hsl(var(--ring) / 0.35);
  outline-offset: 2px;
}

input[type='range']::-moz-range-track {
  background: hsl(var(--surface-2));
  height: 0.375rem;
  border-radius: 9999px;
}

input[type='range']::-moz-range-thumb {
  width: 1rem;
  height: 1rem;
  border-radius: 50%;
  background: hsl(var(--surface));
  border: 1.5px solid hsl(var(--border));
  box-shadow: var(--shadow-subtle);
}

input[type='range']::-moz-range-progress {
  background: hsl(var(--primary) / 0.35);
  height: 0.375rem;
  border-radius: 9999px;
}

/* ============================================================================
   Inputs
   ============================================================================ */

input[type='text'],
input[type='email'],
input[type='password'],
input[type='number'],
input[type='search'],
input[type='tel'],
input[type='url'],
textarea,
select {
  background-color: hsl(var(--surface));
  border: 1px solid hsl(var(--input-border));
  color: hsl(var(--text-primary));
  transition: border-color var(--transition-fast);
}

input:focus,
textarea:focus,
select:focus {
  border-color: hsl(var(--input-border-focus));
  outline: none;
}

input::placeholder,
textarea::placeholder {
  color: hsl(var(--text-muted));
}

/* ============================================================================
   Utilities
   ============================================================================ */

/* Text balance for titles */
.text-balance {
  text-wrap: balance;
}

/* Subtle separator */
.separator-subtle {
  background-color: hsl(var(--hairline));
}

/* Muted link */
.link-muted {
  color: hsl(var(--text-muted));
  text-decoration: none;
  transition: color var(--transition-fast);
}

.link-muted:hover {
  color: hsl(var(--text-secondary));
}

/* Surface utilities */
.bg-surface {
  background-color: hsl(var(--surface));
}

.bg-surface-2 {
  background-color: hsl(var(--surface-2));
}

/* Border utilities */
.border-hairline {
  border-color: hsl(var(--hairline));
}

/* Text utilities */
.text-primary {
  color: hsl(var(--text-primary));
}

.text-secondary {
  color: hsl(var(--text-secondary));
}
